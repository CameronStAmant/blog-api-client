(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,r){},29:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var s=r(1),n=r.n(s),a=r(19),o=r.n(a),c=(r(28),r(2)),l=r(5),i=r(3),d=(r(29),r(9)),u=r.n(d),b=r(10),j=r(0),m=function(e){return Object(j.jsx)("div",{className:"display: grid grid-cols-3 col-span-3 row-start-1 bg-green-100 py-2",children:Object(j.jsxs)("ul",{className:"display: grid col-start-1 col-span-full grid-flow-col place-items-center text-center",children:[Object(j.jsx)("li",{className:"border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/",className:"display: block ",children:"Home"})}),!e.authState&&Object(j.jsx)("li",{className:"sm:col-start-3 lg:col-start-4 bordber-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/login",className:"display: block",children:"Login"})}),!e.authState&&Object(j.jsx)("li",{className:"sm:col-start-4 lg:col-start-5 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/signup",className:"display: block",children:"Sign up"})}),e.authState&&Object(j.jsx)("li",{className:"sm:col-start-4 lg:col-start-5 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/logout",className:"display: block",children:"Log out"})})]})})},h=function(){return Object(j.jsxs)("ul",{className:"display: grid grid-flow-col text-center py-2 row-start-3 col-span-full",children:[Object(j.jsx)("li",{children:"Privacy"}),Object(j.jsx)("li",{children:"About"}),Object(j.jsx)("li",{children:"Contact us"})]})},p=function(e){return Object(j.jsxs)("div",{className:"display: grid grid-cols-3 grid-rows-layout min-h-screen grid-flow-col p-0 m-0 list-none",children:[Object(j.jsx)(m,{authState:e.authState}),e.children,Object(j.jsx)(h,{})]})},f="https://serene-waters-04286.herokuapp.com",g=function(e){var t=Object(s.useState)(null),r=Object(c.a)(t,2),n=r[0],a=r[1];return Object(s.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,r,s,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f+"/posts",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,s=r.posts,n=s.map((function(e){return!0===e.published?Object(j.jsx)("li",{className:"display: grid box-border border-2 shadow-sm rounded-md gap-4 border-green-200 mx-2",children:Object(j.jsxs)(l.b,{to:"/posts/"+e.id,children:[Object(j.jsx)("img",{src:e?f+"/uploads/"+e.coverPhoto:"",alt:"Post Cover"}),Object(j.jsx)("p",{className:"m-14 md:m-32 text-center text-xl font-semibold",children:e.title})]})},e.title):null})),a(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)(p,{authState:e.authState,children:Object(j.jsxs)("div",{className:"display: grid grid-rows-home auto-rows-min row-start-2 col-span-full",children:[Object(j.jsx)("h2",{className:"row-start-1 place-self-center min-h-px col-span-full text-2xl font-semibold",children:"Welcome to the blog!"}),Object(j.jsx)("ul",{className:"display: grid grid-flow-row md:grid-cols-2 row-start-2 lg:grid-cols-3 col-span-full gap-y-4 h-auto",children:n||""})]})})};var O=function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(g,{authState:e.authState})})},x=function(e){var t=Object(s.useState)(null),r=Object(c.a)(t,2),n=r[0],a=r[1],o=Object(s.useState)(null),l=Object(c.a)(o,2),d=l[0],u=l[1],b=Object(s.useState)(null),m=Object(c.a)(b,2),h=m[0],g=m[1],O=Object(s.useState)(null),x=Object(c.a)(O,2),w=x[0],v=x[1];return Object(j.jsxs)(p,{children:[h&&Object(j.jsx)(i.a,{to:"/",push:!0}),Object(j.jsxs)("div",{className:"display: grid col-start-1 grid-rows-6 col-span-full row-start-2 place-content-center",children:[Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault();var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:d,adminSite:!1})};fetch(f+"/login",r).then((function(e){return e.json()})).then((function(t){void 0!==t.token?(window.localStorage.setItem("user",t.token),e.authRefresh(!0),g(!0)):v(t.message)}))},className:"text-center row-start-3",children:[Object(j.jsx)("label",{htmlFor:"username-field",children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md  focus:border-green-500",type:"text",id:"username-field",name:"username",autoComplete:"on",value:n||"",onChange:function(e){return a(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-field",children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md  focus:border-green-500",type:"password",id:"password-field",name:"password",autoComplete:"on",value:d||"",onChange:function(e){return u(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" bg-green-100 rounded-md mt-2 w-48 hover:bg-green-200 cursor-pointer",type:"submit",id:"loginButton",value:"Login"})]}),w&&Object(j.jsx)("p",{className:"row-start-4",children:w})]})]})},w=function(e){return Object(s.useEffect)((function(){window.localStorage.removeItem("user"),e.authRefresh(!0)})),Object(j.jsx)(i.a,{to:"/"})},v=function(){var e=Object(s.useState)(null),t=Object(c.a)(e,2),r=t[0],n=t[1],a=Object(s.useState)(null),o=Object(c.a)(a,2),l=o[0],d=o[1],u=Object(s.useState)(null),b=Object(c.a)(u,2),m=b[0],h=b[1],g=Object(s.useState)(""),O=Object(c.a)(g,2),x=O[0],w=O[1],v=Object(i.g)();return Object(j.jsx)(p,{children:Object(j.jsxs)("div",{className:"display: grid col-start-1 col-span-full grid-rows-3 row-start-2 place-content-center",children:[Object(j.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m===x){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:l,password:m})};fetch(f+"/signup",t).then((function(){return v.push("/login")}))}},className:"text-center row-start-2 self-end",children:[Object(j.jsx)("label",{htmlFor:"username-field",children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"text",id:"username-field",name:"username",autoComplete:"on",value:r||"",onChange:function(e){return n(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"email-field",children:"Email:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"email",id:"email-field",name:"email",autoComplete:"on",value:l||"",onChange:function(e){return d(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-field",children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"password",id:"password-field",name:"password",autoComplete:"on",value:m||"",onChange:function(e){return h(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-confirmation-field",children:"Confirm Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"password",id:"password-confirmation-field",name:"password-confirmation",autoComplete:"on",value:x||"",onChange:function(e){return w(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:"bg-green-100 rounded-md mt-2 w-48 hover:bg-green-200 cursor-pointer",type:"submit",id:"signUpSubmit",value:"Sign Up"})]}),Object(j.jsx)("p",{className:"row-start-3",children:m!==x&&""!==x?"The passwords do not match":""})]})})},y=function(e){var t=Object(s.useState)(null),r=Object(c.a)(t,2),n=r[0],a=r[1],o=Object(i.h)().id,l=function(){var t=Object(b.a)(u.a.mark((function t(r){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user")},body:JSON.stringify({author:e.userId,body:n})},t.next=4,fetch(f+"/posts/"+o+"/comments",s);case 4:e.setComments(),a(null),e.loadComments();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){}),[e.comments]),Object(j.jsx)("div",{className:"justify-self-stretch gap-4",children:e.authState&&Object(j.jsxs)("form",{className:"mt-14 mx-2 text-center",onSubmit:l,children:[Object(j.jsx)("label",{className:"",children:"Submit a comment:"}),Object(j.jsx)("textarea",{className:"w-full box-border border-2 border-solid rounded-md shadow-md gap-2 auto-rows-min-content justify-self-stretch border-green-200",rows:"5",name:"body",value:n||"",onChange:function(e){return a(e.target.value)},required:!0}),Object(j.jsx)("input",{type:"hidden",value:o,className:"w-full",name:"post"}),Object(j.jsx)("input",{type:"submit",className:"border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-2/6 active:bg-green-400 active:border-green-400 shadow-sm",value:"Submit"})]})})},S=r(23),N=r(22),C=r(37).DateTime,I=function(e){return Object(s.useEffect)((function(){(function(){var t=Object(b.a)(u.a.mark((function t(){var r,s,n,a,o,c,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f+"/posts/"+e.postid+"/comments",{mode:"cors"});case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,n=[],a=Object(N.a)(s.comments);try{for(a.s();!(o=a.n()).done;)c=o.value,l=Object(j.jsxs)("div",{className:"box-border border-solid m-2 shadow-md p-1 display: grid gap-2 grid-rows-2 grid-cols-2 auto-rows-min-content justify-self-stretch border-2 border-green-200 rounded-md ",children:[Object(j.jsx)("h4",{className:"justify-self-start",children:c.author.username}),Object(j.jsx)("p",{className:"justify-self-end",children:C.fromISO(c.timestamp).toLocaleString(C.DATETIME_MED)}),Object(j.jsx)("p",{className:"row-start-2 col-span-full",children:c.body}),Object(j.jsx)("br",{})]},c._id),n=[].concat(Object(S.a)(n),[l])}catch(i){a.e(i)}finally{a.f()}e.setComments(n);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.loadComments]),Object(j.jsx)("div",{className:"justify-self-stretch my-14",children:e.comments})},k=function(e){var t=Object(s.useState)(null),r=Object(c.a)(t,2),n=r[0],a=r[1],o=Object(i.h)().id,l=Object(s.useState)(!1),d=Object(c.a)(l,2),m=d[0],h=d[1],g=Object(s.useState)([]),O=Object(c.a)(g,2),x=O[0],w=O[1];return Object(s.useEffect)((function(){(function(){var e=Object(b.a)(u.a.mark((function e(){var t,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f+"/posts/"+o,{mode:"cors",headers:{Authorization:"Bearer "+localStorage.getItem("user")}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,s=r.post,a(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)(p,{authState:e.authState,children:Object(j.jsxs)("div",{className:"display: grid grid-rows-post auto-rows-auto row-start-2 col-span-full",children:[Object(j.jsxs)("div",{className:"display: grid grid-rows-postTitle",children:[Object(j.jsx)("h2",{className:"row-start-1 place-self-center text-2xl font-semibold",children:n?n.title:""}),Object(j.jsx)("img",{src:n?f+"/uploads/"+n.coverPhoto:"",alt:"Post Cover"}),Object(j.jsxs)("p",{className:"mx-2 px-1",children:[" ",n?n.body:""]})]}),e.authState&&Object(j.jsx)(y,{authState:e.authState,userId:e.userId,loadComments:function(){return h(!m)},setComments:function(){return w([])},comments:x}),Object(j.jsx)(I,{postid:o,loadComments:m,setComments:function(e){return w(e)},comments:x})]})})},T=function(){var e=Object(s.useState)(!1),t=Object(c.a)(e,2),r=t[0],n=t[1],a=Object(s.useState)(null),o=Object(c.a)(a,2),d=(o[0],o[1]),u=Object(s.useState)(null),b=Object(c.a)(u,2),m=b[0],h=b[1],p=Object(s.useState)(!1),g=Object(c.a)(p,2),y=g[0],S=g[1];return Object(s.useEffect)((function(){!function(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user")}};localStorage.getItem("user")?fetch(f+"/auth",e).then((function(e){return e.json()})).then((function(e){n(e.response),d(e.username),h(e.userId),S(!1)})):(n(!1),d(null),h(null),S(!1))}()}),[y]),Object(j.jsx)(l.a,{forceRefresh:!0,children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",render:function(){return Object(j.jsx)(O,{authState:r})}}),Object(j.jsx)(i.b,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(x,{authRefresh:function(e){return S(e)}})}}),Object(j.jsx)(i.b,{exact:!0,path:"/signUp",component:v}),Object(j.jsx)(i.b,{exact:!0,path:"/logout",render:function(){return Object(j.jsx)(w,{authRefresh:function(e){return S(e)}})}}),Object(j.jsx)(i.b,{exact:!0,path:"/posts/:id",render:function(){return Object(j.jsx)(k,{authState:r,userId:m})}})]})})};o.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(T,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.2600e0b9.chunk.js.map