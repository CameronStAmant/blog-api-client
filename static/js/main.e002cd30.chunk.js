(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,r){},29:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var s=r(1),n=r.n(s),a=r(20),c=r.n(a),o=(r(28),r(2)),l=r(5),i=r(3),u=(r(29),r(8)),d=r.n(u),b=r(10),j=r(0),m=function(e){return Object(j.jsx)("div",{className:"display: grid grid-cols-3 col-span-3 row-start-1 bg-green-100 py-2",children:Object(j.jsxs)("ul",{className:"display: grid col-start-1 col-span-full grid-flow-col place-items-center text-center",children:[Object(j.jsx)("li",{className:"border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/",className:"display: block ",children:"Home"})}),!e.authState&&Object(j.jsx)("li",{className:"sm:col-start-3 lg:col-start-4 bordber-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/login",className:"display: block",children:"Login"})}),!e.authState&&Object(j.jsx)("li",{className:"sm:col-start-4 lg:col-start-5 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/signup",className:"display: block",children:"Sign up"})}),e.authState&&Object(j.jsx)("li",{className:"sm:col-start-4 lg:col-start-5 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(l.c,{to:"/logout",className:"display: block",children:"Log out"})})]})})},p=function(){return Object(j.jsxs)("ul",{className:"display: grid grid-flow-col text-center py-2 row-start-3 col-span-full",children:[Object(j.jsx)("li",{children:"Privacy"}),Object(j.jsx)("li",{children:"About"}),Object(j.jsx)("li",{children:"Contact us"})]})},h=function(e){return Object(j.jsxs)("div",{className:"display: grid grid-cols-3 grid-rows-layout min-h-screen grid-flow-col p-0 m-0 list-none",children:[Object(j.jsx)(m,{authState:e.authState}),e.children,Object(j.jsx)(p,{})]})},f=function(e){var t=Object(s.useState)(null),r=Object(o.a)(t,2),n=r[0],a=r[1];return Object(s.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,r,s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://serene-waters-04286.herokuapp.com/posts",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,s=r.posts,n=s.map((function(e){return!0===e.published?Object(j.jsx)("li",{className:"display: grid box-border border-2 shadow-sm rounded-md gap-4 border-green-200 mx-2",children:Object(j.jsx)(l.b,{to:"/posts/"+e.id,children:Object(j.jsx)("p",{className:"m-14 md:m-32 text-center text-xl font-semibold",children:e.title})})},e.title):null})),a(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)(h,{authState:e.authState,children:Object(j.jsxs)("div",{className:"display: grid grid-rows-home auto-rows-min row-start-2 col-span-full",children:[Object(j.jsx)("h2",{className:"row-start-1 place-self-center min-h-px col-span-full text-2xl font-semibold",children:"Welcome to the blog!"}),Object(j.jsx)("ul",{className:"display: grid grid-flow-row md:grid-cols-2 row-start-2 lg:grid-cols-3 col-span-full gap-y-4 h-lg",children:n||""})]})})};var O=function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(f,{authState:e.authState})})},g=function(e){var t=Object(s.useState)(null),r=Object(o.a)(t,2),n=r[0],a=r[1],c=Object(s.useState)(null),l=Object(o.a)(c,2),u=l[0],d=l[1],b=Object(s.useState)(null),m=Object(o.a)(b,2),p=m[0],f=m[1],O=Object(s.useState)(null),g=Object(o.a)(O,2),x=g[0],w=g[1];return Object(j.jsxs)(h,{children:[p&&Object(j.jsx)(i.a,{to:"/",push:!0}),Object(j.jsxs)("div",{className:"display: grid col-start-1 grid-rows-6 col-span-full row-start-2 place-content-center",children:[Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault();var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:u,adminSite:!1})};fetch("https://serene-waters-04286.herokuapp.com/login",r).then((function(e){return e.json()})).then((function(t){void 0!==t.token?(window.localStorage.setItem("user",t.token),e.authRefresh(!0),f(!0)):w(t.message)}))},className:"text-center row-start-3",children:[Object(j.jsx)("label",{htmlFor:"username-field",children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md  focus:border-green-500",type:"text",id:"username-field",name:"username",autoComplete:"on",value:n||"",onChange:function(e){return a(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-field",children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md  focus:border-green-500",type:"password",id:"password-field",name:"password",autoComplete:"on",value:u||"",onChange:function(e){return d(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" bg-green-100 rounded-md mt-2 w-48 hover:bg-green-200 cursor-pointer",type:"submit",id:"loginButton",value:"Login"})]}),x&&Object(j.jsx)("p",{className:"row-start-4",children:x})]})]})},x=function(e){return Object(s.useEffect)((function(){window.localStorage.removeItem("user"),e.authRefresh(!0)})),Object(j.jsx)(i.a,{to:"/"})},w=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(s.useState)(null),c=Object(o.a)(a,2),l=c[0],u=c[1],d=Object(s.useState)(null),b=Object(o.a)(d,2),m=b[0],p=b[1],f=Object(s.useState)(""),O=Object(o.a)(f,2),g=O[0],x=O[1],w=Object(i.g)();return Object(j.jsx)(h,{children:Object(j.jsxs)("div",{className:"display: grid col-start-1 col-span-full grid-rows-3 row-start-2 place-content-center",children:[Object(j.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m===g){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:l,password:m})};fetch("https://serene-waters-04286.herokuapp.com/signup",t).then((function(){return w.push("/login")}))}},className:"text-center row-start-2 self-end",children:[Object(j.jsx)("label",{htmlFor:"username-field",children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"text",id:"username-field",name:"username",autoComplete:"on",value:r||"",onChange:function(e){return n(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"email-field",children:"Email:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"email",id:"email-field",name:"email",autoComplete:"on",value:l||"",onChange:function(e){return u(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-field",children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"password",id:"password-field",name:"password",autoComplete:"on",value:m||"",onChange:function(e){return p(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-confirmation-field",children:"Confirm Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input w-48 border-2 border-green-200 rounded-md focus:border-green-500",type:"password",id:"password-confirmation-field",name:"password-confirmation",autoComplete:"on",value:g||"",onChange:function(e){return x(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:"bg-green-100 rounded-md mt-2 w-48 hover:bg-green-200 cursor-pointer",type:"submit",id:"signUpSubmit",value:"Sign Up"})]}),Object(j.jsx)("p",{className:"row-start-3",children:m!==g&&""!==g?"The passwords do not match":""})]})})},v=function(e){var t=Object(s.useState)(null),r=Object(o.a)(t,2),n=r[0],a=r[1],c=Object(i.h)().id,l=function(){var t=Object(b.a)(d.a.mark((function t(r){var s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user")},body:JSON.stringify({author:e.userId,body:n})},t.next=4,fetch("https://serene-waters-04286.herokuapp.com/posts/"+c+"/comments",s);case 4:e.setComments(),a(null),e.loadComments();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){}),[e.comments]),Object(j.jsx)("div",{className:"justify-self-stretch gap-4",children:e.authState&&Object(j.jsxs)("form",{className:"mt-14 mx-2 text-center",onSubmit:l,children:[Object(j.jsx)("label",{className:"",children:"Submit a comment:"}),Object(j.jsx)("textarea",{className:"w-full box-border border-2 border-solid rounded-md shadow-md gap-2 auto-rows-min-content justify-self-stretch border-green-200\n",rows:"5",name:"body",value:n||"",onChange:function(e){return a(e.target.value)},required:!0}),Object(j.jsx)("input",{type:"hidden",value:c,className:"w-full",name:"post"}),Object(j.jsx)("input",{type:"submit",className:"w-16",value:"Submit"})]})})},y=r(23),S=r(22),N=r(37).DateTime,C=function(e){return Object(s.useEffect)((function(){(function(){var t=Object(b.a)(d.a.mark((function t(){var r,s,n,a,c,o,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://serene-waters-04286.herokuapp.com/posts/"+e.postid+"/comments",{mode:"cors"});case 2:return r=t.sent,t.next=5,r.json();case 5:s=t.sent,n=[],a=Object(S.a)(s.comments);try{for(a.s();!(c=a.n()).done;)o=c.value,l=Object(j.jsxs)("div",{className:"box-border border-solid m-2 shadow-md p-1 display: grid gap-2 grid-rows-2 grid-cols-2 auto-rows-min-content justify-self-stretch border-2 border-green-200 rounded-md ",children:[Object(j.jsx)("h4",{className:"justify-self-start",children:o.author.username}),Object(j.jsx)("p",{className:"justify-self-end",children:N.fromISO(o.timestamp).toLocaleString(N.DATETIME_MED)}),Object(j.jsx)("p",{className:"row-start-2 col-span-full",children:o.body}),Object(j.jsx)("br",{})]},o._id),n=[].concat(Object(y.a)(n),[l])}catch(i){a.e(i)}finally{a.f()}e.setComments(n);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.loadComments]),Object(j.jsx)("div",{className:"justify-self-stretch my-14",children:e.comments})},k=function(e){var t=Object(s.useState)(null),r=Object(o.a)(t,2),n=r[0],a=r[1],c=Object(i.h)().id,l=Object(s.useState)(!1),u=Object(o.a)(l,2),m=u[0],p=u[1],f=Object(s.useState)([]),O=Object(o.a)(f,2),g=O[0],x=O[1];return Object(s.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://serene-waters-04286.herokuapp.com/posts/"+c,{mode:"cors",headers:{Authorization:"Bearer "+localStorage.getItem("user")}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,s=r.post,a(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)(h,{authState:e.authState,children:Object(j.jsxs)("div",{className:"display: grid grid-rows-post auto-rows-auto row-start-2 col-span-full",children:[Object(j.jsxs)("div",{className:"display: grid grid-rows-postTitle",children:[Object(j.jsx)("h2",{className:"row-start-1 place-self-center text-2xl font-semibold",children:n?n.title:""}),Object(j.jsxs)("p",{className:"mx-2 px-1",children:[" ",n?n.body:""]})]}),e.authState&&Object(j.jsx)(v,{authState:e.authState,userId:e.userId,loadComments:function(){return p(!m)},setComments:function(){return x([])},comments:g}),Object(j.jsx)(C,{postid:c,loadComments:m,setComments:function(e){return x(e)},comments:g})]})})},I=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),r=t[0],n=t[1],a=Object(s.useState)(null),c=Object(o.a)(a,2),u=(c[0],c[1]),d=Object(s.useState)(null),b=Object(o.a)(d,2),m=b[0],p=b[1],h=Object(s.useState)(!1),f=Object(o.a)(h,2),v=f[0],y=f[1];return Object(s.useEffect)((function(){!function(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user")}};localStorage.getItem("user")?fetch("https://serene-waters-04286.herokuapp.com/auth",e).then((function(e){return e.json()})).then((function(e){n(e.response),u(e.username),p(e.userId),y(!1)})):(n(!1),u(null),p(null),y(!1))}()}),[v]),Object(j.jsx)(l.a,{forceRefresh:!0,children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",render:function(){return Object(j.jsx)(O,{authState:r})}}),Object(j.jsx)(i.b,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(g,{authRefresh:function(e){return y(e)}})}}),Object(j.jsx)(i.b,{exact:!0,path:"/signUp",component:w}),Object(j.jsx)(i.b,{exact:!0,path:"/logout",render:function(){return Object(j.jsx)(x,{authRefresh:function(e){return y(e)}})}}),Object(j.jsx)(i.b,{exact:!0,path:"/posts/:id",render:function(){return Object(j.jsx)(k,{authState:r,userId:m})}})]})})};c.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(I,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.e002cd30.chunk.js.map