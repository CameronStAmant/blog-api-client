(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,r){},29:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var n=r(1),s=r.n(n),c=r(20),a=r.n(c),o=(r(28),r(2)),i=r(5),u=r(3),l=(r(29),r(8)),d=r.n(l),b=r(10),j=r(0),m=function(e){return Object(j.jsx)("div",{className:"display: grid grid-cols-3 col-span-3 bg-green-100",children:Object(j.jsxs)("ul",{className:"display: grid col-start-1 col-span-full grid-flow-col place-items-center",children:[Object(j.jsx)("li",{className:"border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(i.c,{to:"/",className:"display: block",children:"Home"})}),!e.authState&&Object(j.jsx)("li",{className:"sm:col-start-3 lg:col-start-4 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(i.c,{to:"/login",className:"display: block",children:"Login"})}),!e.authState&&Object(j.jsx)("li",{className:"sm:col-start-4 lg:col-start-5 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(i.c,{to:"/signup",className:"display: block",children:"Sign up"})}),e.authState&&Object(j.jsx)("li",{className:"sm:col-start-4 lg:col-start-5 border-solid border-4 border-green-200 rounded-md bg-green-200 hover:bg-green-300 hover:border-green-300 w-5/6 active:bg-green-400 active:border-green-400 shadow-sm",children:Object(j.jsx)(i.c,{to:"/logout",className:"display: block",children:"Log out"})})]})})},h=function(){return Object(j.jsx)("div",{className:"display: grid row-start-3 col-span-full",children:Object(j.jsxs)("ul",{className:"display: grid grid-flow-col",children:[Object(j.jsx)("li",{children:"Privacy"}),Object(j.jsx)("li",{children:"About"}),Object(j.jsx)("li",{children:"Contact us"})]})})},p=(r(37),function(e){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(m,{authState:e.authState}),e.children,Object(j.jsx)(h,{})]})}),O=function(e){var t=Object(n.useState)(null),r=Object(o.a)(t,2),s=r[0],c=r[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://serene-waters-04286.herokuapp.com/posts",{mode:"cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.posts,s=n.map((function(e){return!0===e.published?Object(j.jsx)("li",{className:"display: grid box-border border-2 shadow-sm rounded-md gap-4 border-green-200 ",children:Object(j.jsx)(i.b,{to:"/posts/"+e.id,children:Object(j.jsx)("p",{className:"m-14 md:m-32",children:e.title})})},e.title):null})),c(s);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)(p,{authState:e.authState,children:Object(j.jsxs)("div",{className:"display: grid grid-rows-home auto-rows-min row-start-2 col-span-full",children:[Object(j.jsx)("p",{className:"row-start-1 place-self-center min-h-px col-span-full",children:"Welcome to the blog!"}),Object(j.jsx)("ul",{className:"display: grid grid-flow-row md:grid-cols-2 row-start-2 lg:grid-cols-3 col-span-full gap-4 h-lg",children:s||""})]})})};var f=function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(O,{authState:e.authState})})},g=function(e){var t=Object(n.useState)(null),r=Object(o.a)(t,2),s=r[0],c=r[1],a=Object(n.useState)(null),i=Object(o.a)(a,2),l=i[0],d=i[1],b=Object(n.useState)(null),m=Object(o.a)(b,2),h=m[0],O=m[1],f=Object(n.useState)(null),g=Object(o.a)(f,2),x=g[0],v=g[1];return Object(j.jsxs)(p,{children:[h&&Object(j.jsx)(u.a,{to:"/",push:!0}),Object(j.jsx)("div",{className:"display: grid col-start-1 col-span-full row-start-2 place-content-center",children:Object(j.jsxs)("form",{onSubmit:function(t){t.preventDefault();var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:l,adminSite:!1})};fetch("https://serene-waters-04286.herokuapp.com/login",r).then((function(e){return e.json()})).then((function(t){void 0!==t.token?(window.localStorage.setItem("user",t.token),e.authRefresh(!0),O(!0)):v(t.message)}))},className:"login-form",children:[Object(j.jsx)("label",{htmlFor:"username-field",children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input border-2 border-green-200 rounded-md  focus:border-green-500",type:"text",id:"username-field",name:"username",autoComplete:"on",value:s||"",onChange:function(e){return c(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-field",children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input border-2 border-green-200 rounded-md  focus:border-green-500",type:"password",id:"password-field",name:"password",autoComplete:"on",value:l||"",onChange:function(e){return d(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" bg-green-100 rounded-md mt-2 hover:bg-green-200 cursor-pointer",type:"submit",id:"loginButton",value:"Login"}),x&&Object(j.jsx)("div",{children:x})]})})]})},x=function(e){return Object(n.useEffect)((function(){window.localStorage.removeItem("user"),e.authRefresh(!0)})),Object(j.jsx)(u.a,{to:"/"})},v=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),r=t[0],s=t[1],c=Object(n.useState)(null),a=Object(o.a)(c,2),i=a[0],l=a[1],d=Object(n.useState)(null),b=Object(o.a)(d,2),m=b[0],h=b[1],O=Object(n.useState)(null),f=Object(o.a)(O,2),g=f[0],x=f[1],v=Object(u.g)();return Object(j.jsx)(p,{children:Object(j.jsx)("div",{className:"display: grid col-start-1 col-span-full row-start-2 place-content-center",children:Object(j.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m===g){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:i,password:m})};fetch("https://serene-waters-04286.herokuapp.com/signup",t).then((function(){return v.push("/login")}))}},className:"Sign-up-form",children:[Object(j.jsx)("label",{htmlFor:"username-field",children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input border-2 border-green-200 rounded-md focus:border-green-500",type:"text",id:"username-field",name:"username",autoComplete:"on",value:r||"",onChange:function(e){return s(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"email-field",children:"Email:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input border-2 border-green-200 rounded-md focus:border-green-500",type:"email",id:"email-field",name:"email",autoComplete:"on",value:i||"",onChange:function(e){return l(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-field",children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input border-2 border-green-200 rounded-md focus:border-green-500",type:"password",id:"password-field",name:"password",autoComplete:"on",value:m||"",onChange:function(e){return h(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password-confirmation-field",children:"Confirm Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:" input border-2 border-green-200 rounded-md focus:border-green-500",type:"password",id:"password-confirmation-field",name:"password-confirmation",autoComplete:"on",value:g||"",onChange:function(e){return x(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{className:"bg-green-100 rounded-md mt-2 hover:bg-green-200 cursor-pointer",type:"submit",id:"signUpSubmit",value:"Sign Up"}),m!==g?"The passwords do not match":""]})})})},w=(r(38),r(39),function(e){var t=Object(n.useState)(null),r=Object(o.a)(t,2),s=r[0],c=r[1],a=Object(u.h)().id,i=function(){var t=Object(b.a)(d.a.mark((function t(r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user")},body:JSON.stringify({author:e.userId,body:s})},t.next=4,fetch("https://serene-waters-04286.herokuapp.com/posts/"+a+"/comments",n);case 4:e.setComments(),c(null),e.loadComments();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[e.comments]),Object(j.jsx)("div",{className:"form",children:e.authState&&Object(j.jsxs)("div",{className:"commentForm",children:[Object(j.jsx)("h3",{children:"Submit a comment"}),Object(j.jsx)("br",{}),Object(j.jsxs)("form",{onSubmit:i,children:[Object(j.jsx)("label",{children:"Comment:"}),Object(j.jsx)("br",{}),Object(j.jsx)("textarea",{type:"text",rows:"5",name:"body",value:s||"",onChange:function(e){return c(e.target.value)},required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"hidden",value:a,name:"post"}),Object(j.jsx)("input",{type:"submit",id:"commentSubmit",value:"Submit"})]})]})})}),S=r(23),y=r(22),N=(r(40),r(41).DateTime),C=function(e){return Object(n.useEffect)((function(){(function(){var t=Object(b.a)(d.a.mark((function t(){var r,n,s,c,a,o,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://serene-waters-04286.herokuapp.com/posts/"+e.postid+"/comments",{mode:"cors"});case 2:return r=t.sent,t.next=5,r.json();case 5:n=t.sent,s=[],c=Object(y.a)(n.comments);try{for(c.s();!(a=c.n()).done;)o=a.value,i=Object(j.jsxs)("div",{className:"commentLayout",children:[Object(j.jsx)("h4",{className:"commentAuthor",children:o.author.username}),Object(j.jsx)("p",{className:"commentTimestamp",children:N.fromISO(o.timestamp).toLocaleString(N.DATETIME_MED)}),Object(j.jsx)("p",{className:"commentBody",children:o.body}),Object(j.jsx)("br",{})]},o._id),s=[].concat(Object(S.a)(s),[i])}catch(u){c.e(u)}finally{c.f()}e.setComments(s);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.loadComments]),Object(j.jsx)("div",{className:"Comment",children:e.comments})},k=function(e){var t=Object(n.useState)(null),r=Object(o.a)(t,2),s=r[0],c=r[1],a=Object(u.h)().id,i=Object(n.useState)(!1),l=Object(o.a)(i,2),m=l[0],h=l[1],O=Object(n.useState)([]),f=Object(o.a)(O,2),g=f[0],x=f[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var t,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://serene-waters-04286.herokuapp.com/posts/"+a,{mode:"cors",headers:{Authorization:"Bearer "+localStorage.getItem("user")}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.post,c(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(j.jsx)(p,{authState:e.authState,children:Object(j.jsxs)("div",{className:"postLayout",children:[Object(j.jsxs)("div",{className:"post",children:[Object(j.jsx)("h2",{children:s?s.title:""}),Object(j.jsx)("br",{}),Object(j.jsxs)("p",{children:[" ",s?s.body:""]})]}),Object(j.jsx)(w,{authState:e.authState,userId:e.userId,loadComments:function(){return h(!m)},setComments:function(){return x([])},comments:g}),Object(j.jsx)(C,{postid:a,loadComments:m,setComments:function(e){return x(e)},comments:g})]})})},I=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),r=t[0],s=t[1],c=Object(n.useState)(null),a=Object(o.a)(c,2),l=(a[0],a[1]),d=Object(n.useState)(null),b=Object(o.a)(d,2),m=b[0],h=b[1],p=Object(n.useState)(!1),O=Object(o.a)(p,2),w=O[0],S=O[1];return Object(n.useEffect)((function(){!function(){var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("user")}};localStorage.getItem("user")?fetch("https://serene-waters-04286.herokuapp.com/auth",e).then((function(e){return e.json()})).then((function(e){s(e.response),l(e.username),h(e.userId),S(!1)})):(s(!1),l(null),h(null),S(!1))}()}),[w]),Object(j.jsx)(i.a,{forceRefresh:!0,children:Object(j.jsxs)(u.d,{children:[Object(j.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(j.jsx)(f,{authState:r})}}),Object(j.jsx)(u.b,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(g,{authRefresh:function(e){return S(e)}})}}),Object(j.jsx)(u.b,{exact:!0,path:"/signUp",component:v}),Object(j.jsx)(u.b,{exact:!0,path:"/logout",render:function(){return Object(j.jsx)(x,{authRefresh:function(e){return S(e)}})}}),Object(j.jsx)(u.b,{exact:!0,path:"/posts/:id",render:function(){return Object(j.jsx)(k,{authState:r,userId:m})}})]})})};a.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(I,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.cecede86.chunk.js.map